<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE composition PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                template="./../WEB-INF/template/layout.xhtml"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:a="http://xmlns.jcp.org/jsf/passthrough"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:b="http://bootsfaces.net/ui">

    <ui:define name="nomPag">
        Nueva cita
    </ui:define>

    <ui:define name="background">
        <h:head>
            <f:metadata>
                <f:viewAction action="#{ctrlCitas.cita.setCliDNI(prefs.cli.DNI)}"/>
            </f:metadata>
        </h:head>
        <h:body class="d-flex flex-column h-100" style="background-image:url(#{resource['img/otros/cita_background.jpg']}); 
                background-size: cover; background-repeat: no-repeat; background-attachment:fixed;">
            <div id="top" class="top shadow-lg">
                <ui:include src="../WEB-INF/partes/cabecera.xhtml" />
            </div>

            <div class="container-xl">
                <h:panelGroup rendered="#{not empty facesContext.messageList}">
                    <div class="mt-3 alert alert-danger alert-dismissible fade show" role="alert">
                        <h:messages/>
                        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
                            <span aria-hidden="true">&times;</span>
                        </button>
                    </div>
                </h:panelGroup>

                <div class="row row-cols-md justify-content-center mx-0 my-5">
                    <b:form class="col-12 col-md-6 px-0 align-self-center card bg-light text-center">
                        <h1 class="card-header text-center display-4"><u>Nueva cita</u></h1>
                        <div class="row mt-2">
                            <div class="col-12">
                                <div class="form-group mx-3">
                                    <label for="dia"><strong>DÃ­a de la cita</strong></label>
                                    <b:inputText class="form-control" a:type="date" id="dia" value="#{ctrlCitas.cita.fecha}">
                                        <f:convertDateTime pattern="yyyy-MM-dd" />
                                    </b:inputText> 
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="form-group mx-3">
                                    <label for="vet"><strong>Veterinario</strong></label>
                                    <b:selectOneMenu class="form-control" id="vet" a:value="#{ctrlCitas.cita.vetCC}">
                                        <f:selectItem itemValue="#{null}" itemLabel="-- Selecciona uno --" />
                                        <f:selectItems value="#{ctrlUser.veterinarios}" var="vet" 
                                                       itemValue="#{vet.codCol}" itemLabel="#{vet.nombre}" />
                                    </b:selectOneMenu>
                                </div>
                            </div>
                            <div class="col-12">
                                <div class="form-group mx-3">
                                    <label for="mas"><strong>Mascota</strong></label>
                                    <b:selectOneMenu class="form-control" id="mas" a:value="#{ctrlCitas.cita.masCI}">
                                        <f:selectItem itemValue="#{null}" itemLabel="-- Selecciona uno --" />
                                        <f:selectItems value="#{ctrlMasc.getMascotasCliente(prefs.cli.DNI)}" var="mas" 
                                                       itemValue="#{mas.ci}" itemLabel="#{mas.nombre}" />
                                    </b:selectOneMenu>
                                </div>
                            </div>


                            <div class="col-12">
                                <div class="form-group mx-3">
                                    <label for="hora"><strong>Hora</strong></label>
                                    <b:selectOneMenu class="form-control" id="hora" value = "#{ctrlCitas.cita.hora}">
                                        <f:selectItem itemValue="9:00" itemLabel="9:00" />
                                        <f:selectItem itemValue="10:00" itemLabel="10:00" />
                                        <f:selectItem itemValue="11:00" itemLabel="11:00" />
                                        <f:selectItem itemValue="12:00" itemLabel="12:00" />
                                        <f:selectItem itemValue="13:00" itemLabel="13:00" />
                                        <f:selectItem itemValue="16:00" itemLabel="16:00" />
                                        <f:selectItem itemValue="17:00" itemLabel="17:00" />
                                        <f:selectItem itemValue="18:00" itemLabel="18:00" />
                                        <f:selectItem itemValue="19:00" itemLabel="19:00" />
                                        <f:selectItem itemValue="20:00" itemLabel="20:00" />
                                    </b:selectOneMenu>
                                </div>
                            </div>
                        </div>

                        <div class="mx-3">
                            <b:commandButton class="btn btn-success btn-lg btn-block mb-3" action="#{ctrlCitas.creaCita()}"  value="Crear cita" />
                        </div>
                    </b:form>
                </div>
            </div>
            <ui:include src="../WEB-INF/partes/footer.xhtml"/>
        </h:body>
    </ui:define>

</ui:composition>
